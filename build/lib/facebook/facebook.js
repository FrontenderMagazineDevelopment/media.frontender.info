'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _isomorphicFetch=require('isomorphic-fetch');var _isomorphicFetch2=_interopRequireDefault(_isomorphicFetch);var _crypto=require('crypto');var _crypto2=_interopRequireDefault(_crypto);var _oauth=require('oauth-1.0a');var _oauth2=_interopRequireDefault(_oauth);var _urlencode=require('urlencode');var _urlencode2=_interopRequireDefault(_urlencode);var _formdata=require('formdata');var _formdata2=_interopRequireDefault(_formdata);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step('next',value)},function(err){step('throw',err)})}}return step('next')})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var request=require('request');var qs=require('qs');//api token
//oauth/access_token?client_id=302140436578036&client_secret=bccb07ea4329d9bd9171fd5ee98b31d7&grant_type=client_credentials
/**
 * @class Twitter â€” set of methods to work with twitter api using promises
 */var Facebook=function(){/**
     * @constructor
     */function Facebook(){_classCallCheck(this,Facebook);this.config={consumer_key:process.env.TWITTER_CUSTOMER_KEY,consumer_key_secret:process.env.TWITTER_CUSTOMER_KEY_SECRET,access_tocken:process.env.TWITTER_TOKEN,access_tocken_secret:process.env.TWITTER_TOKEN_SECRET};this.oauth=(0,_oauth2.default)({consumer:{key:this.config.consumer_key,secret:this.config.consumer_key_secret},signature_method:'HMAC-SHA1',hash_function:function hash_function(baseString,key){return _crypto2.default.createHmac('sha1',key).update(baseString).digest('base64')}});this.token={key:this.config.access_tocken,secret:this.config.access_tocken_secret};this.urls={api:'https://graph.facebook.com/v2.11/',publish:'page-id/feed'}}/**
   * Tweet your message
   * @param  {string} status  - The text of the status update. URL encode as necessary. t.co link wrapping will affect character counts.
   * @return {Promise}        - promise with tweeting process
   */_createClass(Facebook,[{key:'publish',value:function(){var _ref=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(message){var request_data,options,response,json;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:request_data={url:this.urls.api+this.urls.publish,method:'POST',data:{message:message}};options={url:request_data.url,method:request_data.method,headers:_extends({'Content-Type':'application/x-www-form-urlencoded','Accept':'application/json'},this.oauth.toHeader(this.oauth.authorize(request_data,this.token))),body:encodeURIComponent('message')+'='+encodeURIComponent(message)};_context.next=4;return(0,_isomorphicFetch2.default)(request_data.url,options);case 4:response=_context.sent;if(!response.ok){_context.next=10;break}_context.next=8;return response.json();case 8:json=_context.sent;return _context.abrupt('return',json);case 10:throw new Error(response.status+' '+response.statusText);case 11:case'end':return _context.stop();}}},_callee,this)}));function publish(_x){return _ref.apply(this,arguments)}return publish}()}]);return Facebook}();exports.default=Facebook;
//# sourceMappingURL=facebook.js.map